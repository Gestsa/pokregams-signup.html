<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-key="signupTitle">PoKreGaM - Rejestracja</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7fafc;
            color: #2d3748;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 500px; /* Slightly wider for avatars */
            box-sizing: border-box;
            text-align: center;
            position: relative;
        }

        .language-selector {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #cbd5e0;
            background-color: #edf2f7;
            font-size: 0.9em;
            color: #2d3748;
            cursor: pointer;
            outline: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        h2 {
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.2em;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #4a5568;
            font-size: 1em;
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="date"],
        select {
            width: calc(100% - 24px);
            padding: 12px;
            border: 1px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1.1em;
            box-sizing: border-box;
            background-color: #edf2f7;
            color: #2d3748;
        }

        button {
            padding: 12px 25px;
            background-color: #4299e1;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 700;
            transition: background-color 0.3s ease-in-out, transform 0.1s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        button:hover {
            background-color: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .link-text {
            margin-top: 25px;
            font-size: 0.95em;
        }

        .link-text a {
            color: #4299e1;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease-in-out;
        }

        .link-text a:hover {
            color: #3182ce;
        }

        .error-message {
            color: #e53e3e;
            margin-top: 15px;
            font-size: 0.9em;
            font-weight: 600;
            text-align: center;
        }

        .success-message {
            color: #38a169;
            margin-top: 15px;
            font-size: 0.9em;
            font-weight: 600;
            text-align: center;
        }

        #avatarsContainer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); /* Adjust minmax for smaller screens */
            gap: 15px;
            margin-bottom: 25px;
            justify-items: center;
            padding: 10px 0; /* Add some padding */
        }

        .avatar {
            border: 3px solid transparent;
            border-radius: 12px;
            padding: 8px;
            cursor: pointer;
            text-align: center;
            transition: border-color .3s ease-in-out, background-color .3s ease-in-out, box-shadow .2s;
            background-color: #edf2f7;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .05);
        }

        .avatar img {
            width: 70px; /* Slightly smaller for grid */
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            display: block;
            margin: 0 auto 8px;
            border: 2px solid #cbd5e0;
        }

        .avatar.selected {
            border-color: #4299e1;
            background-color: #ebf8ff;
            box-shadow: 0 0 0 4px rgba(66, 153, 225, .6);
            transform: scale(1.05);
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }
            h2 {
                font-size: 1.8em;
            }
            input[type="text"],
            input[type="email"],
            input[type="password"],
            input[type="date"],
            select {
                font-size: 1em;
                padding: 10px;
            }
            button {
                font-size: 1.1em;
                padding: 10px 20px;
            }
            .avatar img {
                width: 60px;
                height: 60px;
            }
            #avatarsContainer {
                grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <select id="languageSelect" class="language-selector">
            <option value="pl">Polski</option>
            <option value="en">English</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="hu">Magyar</option>
            <option value="mk">–ú–∞–∫–µ–¥–æ–Ω—Å–∫–∏</option>
        </select>

        <h2 data-key="signupHeader">Stw√≥rz swoje konto PoKreGaM</h2>
        <form id="signUpForm">
            <p data-key="selectCharacterLabel">Wybierz swojƒÖ postaƒá:</p>
            <div id="avatarsContainer">
                <!-- Przyk≈Çadowe awatary - mo≈ºesz je zmieniƒá na inne URL-e -->
                <div class="avatar" data-avatar-url="https://placehold.co/80x80/cccccc/000000?text=üë§">
                    <img src="https://placehold.co/80x80/cccccc/000000?text=üë§" alt="Domy≈õlny Awatar">
                    <span data-key="defaultAvatarName">Domy≈õlny</span>
                </div>
                <div class="avatar" data-avatar-url="https://placehold.co/80x80/ffcc00/000000?text=üßô">
                    <img src="https://placehold.co/80x80/ffcc00/000000?text=üßô" alt="Czarodziej">
                    <span data-key="wizardAvatarName">Czarodziej</span>
                </div>
                <div class="avatar" data-avatar-url="https://placehold.co/80x80/00ccff/000000?text=üõ°Ô∏è">
                    <img src="https://placehold.co/80x80/00ccff/000000?text=üõ°Ô∏è" alt="Rycerz">
                    <span data-key="knightAvatarName">Rycerz</span>
                </div>
                <div class="avatar" data-avatar-url="https://placehold.co/80x80/cc00ff/000000?text=üßù‚Äç‚ôÄÔ∏è">
                    <img src="https://placehold.co/80x80/cc00ff/000000?text=üßù‚Äç‚ôÄÔ∏è" alt="Elfka">
                    <span data-key="elfAvatarName">Elfka</span>
                </div>
                <div class="avatar" data-avatar-url="https://placehold.co/80x80/00ffcc/000000?text=ü§ñ">
                    <img src="https://placehold.co/80x80/00ffcc/000000?text=ü§ñ" alt="Robot">
                    <span data-key="robotAvatarName">Robot</span>
                </div>
            </div>

            <div class="form-group">
                <label for="signUpUsername" data-key="usernameLabel">Nazwa u≈ºytkownika:</label>
                <input type="text" id="signUpUsername" name="username" required autocomplete="username">
            </div>
            <div class="form-group">
                <label for="signUpEmail" data-key="emailLabel">Email (opcjonalnie):</label>
                <input type="email" id="signUpEmail" name="email" autocomplete="email">
            </div>
            <div class="form-group">
                <label for="signUpCountry" data-key="countryLabel">Kraj:</label>
                <select id="signUpCountry" name="country" required>
                    <option value="" data-key="selectCountryOption">Wybierz kraj</option>
                    <option value="PL">Polska</option>
                    <option value="US">United States</option>
                    <option value="MK">North Macedonia</option>
                    <option value="HU">Hungary</option>
                    <option value="DE">Germany</option>
                    <option value="RU">Russia</option>
                </select>
            </div>
            <div class="form-group">
                <label for="signUpPassword" data-key="passwordLabel">Has≈Ço:</label>
                <input type="password" id="signUpPassword" name="password" required autocomplete="new-password">
            </div>
            <div class="form-group">
                <label for="signUpConfirmPassword" data-key="confirmPasswordLabel">Potwierd≈∫ has≈Ço:</label>
                <input type="password" id="signUpConfirmPassword" name="confirmPassword" required autocomplete="new-password">
            </div>
            <div class="form-group">
                <label for="signUpBirthdate" data-key="birthdateLabel">Data urodzenia:</label>
                <input type="date" id="signUpBirthdate" name="birthdate" required>
            </div>
            
            <button type="submit" data-key="signUpButton">Zarejestruj siƒô</button>
            <p id="signUpError" class="error-message"></p>
            <p id="signUpSuccess" class="success-message"></p>
            <p class="link-text">
                <span data-key="hasAccountText">Masz ju≈º konto?</span> <a href="login.html" data-key="loginLink">Zaloguj siƒô</a>
            </p>
        </form>
    </div>

    <script type="module">
        // --- Firebase Imports and Configuration (PLACEHOLDER) ---
        // Pamiƒôtaj, aby uzupe≈Çniƒá tƒô sekcjƒô swoimi danymi Firebase, je≈õli chcesz u≈ºywaƒá prawdziwej bazy danych.
        // const firebaseConfig = {
        //     apiKey: "YOUR_API_KEY",
        //     authDomain: "YOUR_AUTH_DOMAIN",
        //     projectId: "YOUR_PROJECT_ID",
        //     storageBucket: "YOUR_STORAGE_BUCKET",
        //     messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        //     appId: "YOUR_APP_ID"
        // };
        // import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        // import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        // let app, auth, db;
        // try {
        //     app = initializeApp(firebaseConfig);
        //     auth = getAuth(app);
        //     db = getFirestore(app);
        // } catch (e) {
        //     console.error("Firebase initialization error:", e);
        //     // Handle Firebase init error, e.g., show a message to the user
        // }
        // --- END Firebase Configuration ---

        // Translations object
        const translations = {
            pl: {
                signupTitle: 'PoKreGaM - Rejestracja',
                signupHeader: 'Stw√≥rz swoje konto PoKreGaM',
                selectCharacterLabel: 'Wybierz swojƒÖ postaƒá:',
                defaultAvatarName: 'Domy≈õlny',
                wizardAvatarName: 'Czarodziej',
                knightAvatarName: 'Rycerz',
                elfAvatarName: 'Elfka',
                robotAvatarName: 'Robot',
                usernameLabel: 'Nazwa u≈ºytkownika:',
                emailLabel: 'Email (opcjonalnie):',
                countryLabel: 'Kraj:',
                selectCountryOption: 'Wybierz kraj',
                passwordLabel: 'Has≈Ço:',
                confirmPasswordLabel: 'Potwierd≈∫ has≈Ço:',
                birthdateLabel: 'Data urodzenia:',
                signUpButton: 'Zarejestruj siƒô',
                hasAccountText: 'Masz ju≈º konto?',
                loginLink: 'Zaloguj siƒô',
                usernameRequired: 'Nazwa u≈ºytkownika jest wymagana.',
                passwordRequired: 'Has≈Ço jest wymagane.',
                passwordMinLength: 'Has≈Ço musi mieƒá co najmniej 6 znak√≥w.',
                passwordsMismatch: 'Has≈Ça nie pasujƒÖ do siebie.',
                birthdateRequired: 'Data urodzenia jest wymagana.',
                countryRequired: 'Kraj jest wymagany.',
                ageRestriction: 'Musisz mieƒá uko≈Ñczone 13 lat, aby siƒô zarejestrowaƒá.',
                signupSuccess: 'Rejestracja zako≈Ñczona pomy≈õlnie! Mo≈ºesz teraz siƒô zalogowaƒá.',
                signupError: 'WystƒÖpi≈Ç b≈ÇƒÖd podczas rejestracji. Spr√≥buj ponownie.',
                usernameTaken: 'Ta nazwa u≈ºytkownika jest ju≈º zajƒôta.' // Example for Firebase
            },
            en: {
                signupTitle: 'PoKreGaM - Sign Up',
                signupHeader: 'Create your PoKreGaM account',
                selectCharacterLabel: 'Select your character:',
                defaultAvatarName: 'Default',
                wizardAvatarName: 'Wizard',
                knightAvatarName: 'Knight',
                elfAvatarName: 'Elf',
                robotAvatarName: 'Robot',
                usernameLabel: 'Username:',
                emailLabel: 'Email (optional):',
                countryLabel: 'Country:',
                selectCountryOption: 'Select a country',
                passwordLabel: 'Password:',
                confirmPasswordLabel: 'Confirm Password:',
                birthdateLabel: 'Birthdate:',
                signUpButton: 'Sign Up',
                hasAccountText: 'Already have an account?',
                loginLink: 'Log In',
                usernameRequired: 'Username is required.',
                passwordRequired: 'Password is required.',
                passwordMinLength: 'Password must be at least 6 characters long.',
                passwordsMismatch: 'Passwords do not match.',
                birthdateRequired: 'Birthdate is required.',
                countryRequired: 'Country is required.',
                ageRestriction: 'You must be at least 13 years old to register.',
                signupSuccess: 'Registration successful! You can now log in.',
                signupError: 'An error occurred during registration. Please try again.',
                usernameTaken: 'This username is already taken.'
            },
            ru: {
                signupTitle: 'PoKreGaM - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è',
                signupHeader: '–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç PoKreGaM',
                selectCharacterLabel: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:',
                defaultAvatarName: '–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é',
                wizardAvatarName: '–í–æ–ª—à–µ–±–Ω–∏–∫',
                knightAvatarName: '–†—ã—Ü–∞—Ä—å',
                elfAvatarName: '–≠–ª—å—Ñ–∏–π–∫–∞',
                robotAvatarName: '–†–æ–±–æ—Ç',
                usernameLabel: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
                emailLabel: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):',
                countryLabel: '–°—Ç—Ä–∞–Ω–∞:',
                selectCountryOption: '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É',
                passwordLabel: '–ü–∞—Ä–æ–ª—å:',
                confirmPasswordLabel: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:',
                birthdateLabel: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:',
                signUpButton: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
                hasAccountText: '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?',
                loginLink: '–í–æ–π—Ç–∏',
                usernameRequired: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.',
                passwordRequired: '–ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.',
                passwordMinLength: '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.',
                passwordsMismatch: '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç.',
                birthdateRequired: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.',
                countryRequired: '–°—Ç—Ä–∞–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.',
                ageRestriction: '–í–∞–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 13 –ª–µ—Ç –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.',
                signupSuccess: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.',
                signupError: '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.',
                usernameTaken: '–≠—Ç–æ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –∑–∞–Ω—è—Ç–æ.'
            },
            hu: {
                signupTitle: 'PoKreGaM - Regisztr√°ci√≥',
                signupHeader: 'Hozza l√©tre PoKreGaM fi√≥kj√°t',
                selectCharacterLabel: 'V√°lassza ki karakter√©t:',
                defaultAvatarName: 'Alap√©rtelmezett',
                wizardAvatarName: 'Var√°zsl√≥',
                knightAvatarName: 'Lovag',
                elfAvatarName: 'Elf',
                robotAvatarName: 'Robot',
                usernameLabel: 'Felhaszn√°l√≥n√©v:',
                emailLabel: 'E-mail (opcion√°lis):',
                countryLabel: 'Orsz√°g:',
                selectCountryOption: 'V√°lasszon orsz√°got',
                passwordLabel: 'Jelsz√≥:',
                confirmPasswordLabel: 'Jelsz√≥ meger≈ës√≠t√©se:',
                birthdateLabel: 'Sz√ºlet√©si d√°tum:',
                signUpButton: 'Regisztr√°ci√≥',
                hasAccountText: 'M√°r van fi√≥kja?',
                loginLink: 'Bejelentkez√©s',
                usernameRequired: 'Felhaszn√°l√≥n√©v k√∂telez≈ë.',
                passwordRequired: 'Jelsz√≥ k√∂telez≈ë.',
                passwordMinLength: 'A jelsz√≥nak legal√°bb 6 karakter hossz√∫nak kell lennie.',
                passwordsMismatch: 'A jelszavak nem egyeznek.',
                birthdateRequired: 'Sz√ºlet√©si d√°tum k√∂telez≈ë.',
                countryRequired: 'Orsz√°g k√∂telez≈ë.',
                ageRestriction: 'Legal√°bb 13 √©vesnek kell lennie a regisztr√°ci√≥hoz.',
                signupSuccess: 'Sikeres regisztr√°ci√≥! Most m√°r bejelentkezhet.',
                signupError: 'Hiba t√∂rt√©nt a regisztr√°ci√≥ sor√°n. K√©rj√ºk, pr√≥b√°lja √∫jra.',
                usernameTaken: 'Ez a felhaszn√°l√≥n√©v m√°r foglalt.'
            },
            mk: {
                signupTitle: 'PoKreGaM - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—ò–∞',
                signupHeader: '–ö—Ä–µ–∏—Ä–∞—ò—Ç–µ —ò–∞ –≤–∞—à–∞—Ç–∞ PoKreGaM —Å–º–µ—Ç–∫–∞',
                selectCharacterLabel: '–ò–∑–±–µ—Ä–µ—Ç–µ –≥–æ –≤–∞—à–∏–æ—Ç –∫–∞—Ä–∞–∫—Ç–µ—Ä:',
                defaultAvatarName: '–°—Ç–∞–Ω–¥–∞—Ä–¥–µ–Ω',
                wizardAvatarName: '–í–æ–ª—à–µ–±–Ω–∏–∫',
                knightAvatarName: '–í–∏—Ç–µ–∑',
                elfAvatarName: '–ï–ª—Ñ',
                robotAvatarName: '–†–æ–±–æ—Ç',
                usernameLabel: '–ö–æ—Ä–∏—Å–Ω–∏—á–∫–æ –∏–º–µ:',
                emailLabel: '–ï-–ø–æ—à—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ):',
                countryLabel: '–î—Ä–∂–∞–≤–∞:',
                selectCountryOption: '–ò–∑–±–µ—Ä–µ—Ç–µ –¥—Ä–∂–∞–≤–∞',
                passwordLabel: '–õ–æ–∑–∏–Ω–∫–∞:',
                confirmPasswordLabel: '–ü–æ—Ç–≤—Ä–¥–∏ –ª–æ–∑–∏–Ω–∫–∞:',
                birthdateLabel: '–î–∞—Ç—É–º –Ω–∞ —Ä–∞—ì–∞—ö–µ:',
                signUpButton: '–†–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞—ò —Å–µ',
                hasAccountText: '–í–µ—ú–µ –∏–º–∞—Ç–µ —Å–º–µ—Ç–∫–∞?',
                loginLink: '–ù–∞—ò–∞–≤–∏ —Å–µ',
                usernameRequired: '–ö–æ—Ä–∏—Å–Ω–∏—á–∫–æ—Ç–æ –∏–º–µ –µ –∑–∞–¥–æ–ª–∂–∏—Ç–µ–ª–Ω–æ.',
                passwordRequired: '–õ–æ–∑–∏–Ω–∫–∞—Ç–∞ –µ –∑–∞–¥–æ–ª–∂–∏—Ç–µ–ª–Ω–∞.',
                passwordMinLength: '–õ–æ–∑–∏–Ω–∫–∞—Ç–∞ –º–æ—Ä–∞ –¥–∞ –∏–º–∞ –Ω–∞—ò–º–∞–ª–∫—É 6 –∑–Ω–∞—Ü–∏.',
                passwordsMismatch: '–õ–æ–∑–∏–Ω–∫–∏—Ç–µ –Ω–µ —Å–µ —Å–æ–≤–ø–∞—ì–∞–∞—Ç.',
                birthdateRequired: '–î–∞—Ç—É–º–æ—Ç –Ω–∞ —Ä–∞—ì–∞—ö–µ –µ –∑–∞–¥–æ–ª–∂–∏—Ç–µ–ª–µ–Ω.',
                countryRequired: '–î—Ä–∂–∞–≤–∞—Ç–∞ –µ –∑–∞–¥–æ–ª–∂–∏—Ç–µ–ª–Ω–∞.',
                ageRestriction: '–ú–æ—Ä–∞ –¥–∞ –∏–º–∞—Ç–µ –Ω–∞—ò–º–∞–ª–∫—É 13 –≥–æ–¥–∏–Ω–∏ –∑–∞ –¥–∞ —Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞—Ç–µ.',
                signupSuccess: '–£—Å–ø–µ—à–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—ò–∞! –°–µ–≥–∞ –º–æ–∂–µ—Ç–µ –¥–∞ —Å–µ –Ω–∞—ò–∞–≤–∏—Ç–µ.',
                signupError: '–ù–∞—Å—Ç–∞–Ω–∞ –≥—Ä–µ—à–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—ò–∞—Ç–∞. –í–µ –º–æ–ª–∏–º–µ –æ–±–∏–¥–µ—Ç–µ —Å–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ.',
                usernameTaken: '–û–≤–∞ –∫–æ—Ä–∏—Å–Ω–∏—á–∫–æ –∏–º–µ –µ –≤–µ—ú–µ –∑–∞—Ñ–∞—Ç–µ–Ω–æ.'
            }
        };

        let selectedAvatarUrl = "https://placehold.co/80x80/cccccc/000000?text=üë§"; // Default avatar

        // Function to set language
        function setLanguage(lang) {
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    if (element.tagName === 'TITLE') {
                        document.title = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                    }
                }
            });
            // Update avatar names if they are part of data-key
            document.querySelectorAll('.avatar span[data-key]').forEach(span => {
                const key = span.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    span.textContent = translations[lang][key];
                }
            });

            // Clear messages on language change
            document.getElementById('signUpError').textContent = '';
            document.getElementById('signUpSuccess').textContent = '';
        }

        // Event listener for language selection
        document.getElementById('languageSelect').addEventListener('change', function() {
            setLanguage(this.value);
        });

        // Initial language set to Polish and load avatars
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('languageSelect').value = 'pl';
            setLanguage('pl');

            // Avatars selection logic
            const avatarsContainer = document.getElementById('avatarsContainer');
            avatarsContainer.addEventListener('click', function(event) {
                let targetAvatar = event.target.closest('.avatar');
                if (targetAvatar) {
                    // Remove 'selected' class from all avatars
                    document.querySelectorAll('.avatar').forEach(avatar => {
                        avatar.classList.remove('selected');
                    });
                    // Add 'selected' class to the clicked avatar
                    targetAvatar.classList.add('selected');
                    selectedAvatarUrl = targetAvatar.getAttribute('data-avatar-url');
                }
            });

            // Select the default avatar initially
            const defaultAvatar = document.querySelector('.avatar[data-avatar-url="https://placehold.co/80x80/cccccc/000000?text=üë§"]');
            if (defaultAvatar) {
                defaultAvatar.classList.add('selected');
            }
        });

        // Sign Up form submission
        document.getElementById('signUpForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const username = document.getElementById('signUpUsername').value.trim();
            const email = document.getElementById('signUpEmail').value.trim();
            const country = document.getElementById('signUpCountry').value;
            const password = document.getElementById('signUpPassword').value;
            const confirmPassword = document.getElementById('signUpConfirmPassword').value;
            const birthdate = document.getElementById('signUpBirthdate').value;
            const signUpError = document.getElementById('signUpError');
            const signUpSuccess = document.getElementById('signUpSuccess');
            const currentLang = document.getElementById('languageSelect').value;

            signUpError.textContent = ''; // Clear previous errors
            signUpSuccess.textContent = ''; // Clear previous success messages

            // Basic validation
            if (!username) {
                signUpError.textContent = translations[currentLang].usernameRequired;
                return;
            }
            if (!password) {
                signUpError.textContent = translations[currentLang].passwordRequired;
                return;
            }
            if (password.length < 6) {
                signUpError.textContent = translations[currentLang].passwordMinLength;
                return;
            }
            if (password !== confirmPassword) {
                signUpError.textContent = translations[currentLang].passwordsMismatch;
                return;
            }
            if (!birthdate) {
                signUpError.textContent = translations[currentLang].birthdateRequired;
                return;
            }
            if (!country) {
                signUpError.textContent = translations[currentLang].countryRequired;
                return;
            }

            // Age validation (at least 13 years old)
            const birthDateObj = new Date(birthdate);
            const today = new Date();
            let age = today.getFullYear() - birthDateObj.getFullYear();
            const m = today.getMonth() - birthDateObj.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < birthDateObj.getDate())) {
                age--;
            }
            if (age < 13) {
                signUpError.textContent = translations[currentLang].ageRestriction;
                return;
            }

            // --- Firebase Registration Logic (PLACEHOLDER) ---
            // W tym miejscu doda≈Çby≈õ logikƒô rejestracji u≈ºytkownika w Firebase Auth
            // i zapisywania danych profilu do Firestore.

            // Example of a simulated successful registration
            console.log("Simulating registration with:", {
                username,
                email,
                country,
                birthdate,
                avatar: selectedAvatarUrl
            });

            // Replace this simulated success with actual Firebase calls
            // try {
            //     const userCredential = await createUserWithEmailAndPassword(auth, email, password);
            //     const user = userCredential.user;
            //     console.log("Firebase user created:", user.uid);

            //     // Save user profile data to Firestore
            //     await setDoc(doc(db, "users", user.uid), {
            //         username: username,
            //         email: email,
            //         country: country,
            //         birthdate: birthdate,
            //         avatarUrl: selectedAvatarUrl,
            //         xp: 0,
            //         level: 1,
            //         gold: 0,
            //         friends: []
            //     });
            //     console.log("User profile saved to Firestore.");

            //     signUpSuccess.textContent = translations[currentLang].signupSuccess;
            //     // Optionally redirect to login page after a short delay
            //     setTimeout(() => {
            //         window.location.href = 'login.html';
            //     }, 2000);

            // } catch (error) {
            //     console.error("Firebase registration error:", error.code, error.message);
            //     let errorMessage = translations[currentLang].signupError;
            //     if (error.code === 'auth/email-already-in-use') {
            //         errorMessage = 'Ten adres e-mail jest ju≈º u≈ºywany.'; // Add specific error translation
            //     } else if (error.code === 'auth/invalid-email') {
            //         errorMessage = 'Nieprawid≈Çowy format adresu e-mail.';
            //     }
            //     signUpError.textContent = errorMessage;
            // }

            // --- Simulated success/error for demonstration ---
            // If you uncomment the Firebase logic above, remove this part.
            if (username === 'existingUser') { // Example of a simulated taken username
                signUpError.textContent = translations[currentLang].usernameTaken;
            } else {
                signUpSuccess.textContent = translations[currentLang].signupSuccess;
                // Simulate redirection
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 2000);
            }
        });
    </script>
</body>
</html>
